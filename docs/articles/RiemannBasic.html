<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Riemann 101 : A First Step • Riemann</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Riemann 101 : A First Step">
<meta property="og:description" content="Riemann">
<meta property="og:image" content="https://kisungyou.com/Riemann/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-163713603-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-163713603-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Riemann</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/RiemannBasic.html">Riemann 101 : A First Step</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Other Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://CRAN.R-project.org/package=RiemBase" class="external-link">(CRAN) RiemBase</a>
    </li>
    <li class="divider">
    </li>
<li>
      <a href="https://kisungyou.com/Rdimtools/" class="external-link">Rdimtools</a>
    </li>
    <li>
      <a href="https://kisungyou.com/T4cluster/" class="external-link">T4cluster</a>
    </li>
    <li>
      <a href="https://kisungyou.com/T4transport/" class="external-link">T4transport</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://twitter.com/kisung_you" class="external-link">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/kisungyou/Riemann" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
<li>
  <a href="../mailto:kisungyou@outlook.com">
    <span class="fa fa-envelope"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Riemann 101 : A First Step</h1>
                        <h4 data-toc-skip class="author">Kisung You</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/kisungyou/Riemann/blob/HEAD/vignettes/RiemannBasic.Rmd" class="external-link"><code>vignettes/RiemannBasic.Rmd</code></a></small>
      <div class="hidden name"><code>RiemannBasic.Rmd</code></div>

    </div>

    
    
<p>In this vignette, we demonstrate basic functionalities of <strong>Riemann</strong> package by walking through from installation to a simple analysis with the <em>cities</em> dataset for the sphere manifold <span class="math inline">\(\mathcal{S}^2\)</span>.</p>
<div class="section level2">
<h2 id="install-and-load">Install and Load<a class="anchor" aria-label="anchor" href="#install-and-load"></a>
</h2>
<p><strong>Riemann</strong> package can be installed via two outlets. A release version from CRAN can be installed</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"Riemann"</span><span class="op">)</span></code></pre></div>
<p>or a development version is available from GitHub with <code>devtools</code> package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">require</a></span><span class="op">(</span><span class="st"><a href="https://devtools.r-lib.org/" class="external-link">"devtools"</a></span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span>
<span class="op">}</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/remote-reexports.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"kisungyou/Riemann"</span><span class="op">)</span></code></pre></div>
<p>Now we are ready to go by loading the library.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://kisungyou.com/Riemann/">Riemann</a></span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="users-wrap-the-data">Users, Wrap the Data!<a class="anchor" aria-label="anchor" href="#users-wrap-the-data"></a>
</h2>
<p>Our package is designed to be a <em>friendly toolkit</em> for those with less computational expertise. Therefore, we decided to make the structure and workflow of the package exposed to users as simple as possible. To serve its purpose best, we decided to be a bit coercive; <strong>users, prepare the data</strong> (please).</p>
<p>In geometric statistics, data are usually represented as matrices. That means, the biggest huddle would be to wrap your data in a suitable form. When you provide one of our wrapper functions - named <code>wrap.***()</code> - with your data. Then the process we call <strong>wrapping</strong> would check the suitability of your matrix data with respect to the definition of the manifold you want to use and even apply suitable transformation for you when possible.</p>
</div>
<div class="section level2">
<h2 id="example-big-cities-in-us">Example : Big Cities in US<a class="anchor" aria-label="anchor" href="#example-big-cities-in-us"></a>
</h2>
<p>As of Jan. 2006, there are 60 cities in the contiguous U.S. with population size larger than 300,000 (not the metropolitan areas, but just the cities). It is common in spatial statistics to represent locations on Earth with geographic coordinates - latitude and longitude. This representation can be freely transformed into cartesian coordinate representation <span class="math inline">\((x,y,z) \in \mathcal{S}^2 \subset \mathbb{R}^3\)</span> and vice versa.</p>
<p>Here, our goal is to compute the <em>center-most</em> location for 60 populous cities. Before proceeding any further, let’s see how these cities are spread across the U.S. In <strong>Riemann</strong> package, the data is available under the name <code>cities</code>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load the necessary libraries for visualization</span>
<span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"usmap"</span>,  quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"usmap"</span><span class="op">)</span><span class="op">}</span>
<span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"ggplot2"</span>,quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span><span class="op">}</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://usmap.dev" class="external-link">usmap</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span>

<span class="co"># load the cities dataset and apply converting</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"cities"</span><span class="op">)</span>
<span class="va">dfcities</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>lon<span class="op">=</span><span class="va">cities</span><span class="op">$</span><span class="va">coord</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span>, lat<span class="op">=</span><span class="va">cities</span><span class="op">$</span><span class="va">coord</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span>, tt<span class="op">=</span><span class="va">cities</span><span class="op">$</span><span class="va">names</span><span class="op">)</span>
<span class="va">mycities</span> <span class="op">=</span> <span class="fu">usmap</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/usmap/man/usmap_transform.html" class="external-link">usmap_transform</a></span><span class="op">(</span><span class="va">dfcities</span><span class="op">)</span>

<span class="co"># visualize</span>
<span class="va">myplot</span> <span class="op">&lt;-</span> <span class="fu">usmap</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/usmap/man/plot_usmap.html" class="external-link">plot_usmap</a></span><span class="op">(</span>regions<span class="op">=</span><span class="st">"states"</span>, exclude<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"AK"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">mycities</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">lon.1</span>, y<span class="op">=</span><span class="va">lat.1</span><span class="op">)</span>, alpha<span class="op">=</span><span class="fl">.5</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"60 Populated Cities in the US"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">myplot</span><span class="op">)</span></code></pre></div>
<p><img src="RiemannBasic_files/figure-html/unnamed-chunk-4-1.png" width="480" style="display: block; margin: auto;"></p>
<p>In order to find the <em>mean</em> location of those cities, the first option would be to come up with an Euclidean way of thinking: do the averaging for longitude and latitude of all corresponding cities. However, a more geometrically sound way of doing it would be to find geodesic mean. Here, we will use <code><a href="../reference/riem.mean.html">riem.mean()</a></code> function that computes Fréchet mean on the manifold. As we described above, the steps will be shown in the code snippet below. For the convenience, we also added the location information in cartesian coordinates as well.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># (WRAPPING) Spherical Data</span>
<span class="va">myriem</span> <span class="op">=</span> <span class="fu"><a href="../reference/wrap.sphere.html">wrap.sphere</a></span><span class="op">(</span><span class="va">cities</span><span class="op">$</span><span class="va">cartesian</span><span class="op">)</span>

<span class="co"># (INFERENCE) Compute the mean &amp; Convert back to Geographic Coordinates</span>
<span class="va">intmean</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="fu"><a href="../reference/riem.mean.html">riem.mean</a></span><span class="op">(</span><span class="va">myriem</span><span class="op">)</span><span class="op">$</span><span class="va">mean</span><span class="op">)</span> <span class="co"># vectorization for convenience</span>
<span class="va">geomean</span> <span class="op">=</span> <span class="fu"><a href="../reference/sphere.convert.html">sphere.xyz2geo</a></span><span class="op">(</span><span class="va">intmean</span><span class="op">)</span>           <span class="co"># (lat, lon) will be returned</span>

<span class="co"># (EXTRA)</span>
<span class="co"># Compute Euclidean average of Geographic Coordinates</span>
<span class="va">eucmean</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/double.html" class="external-link">as.double</a></span><span class="op">(</span><span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">colMeans</a></span><span class="op">(</span><span class="va">cities</span><span class="op">$</span><span class="va">coord</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Merge two means</span>
<span class="va">twomean</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">geomean</span>, <span class="va">eucmean</span><span class="op">)</span>
<span class="va">dfmeans</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>lon<span class="op">=</span><span class="va">twomean</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span>, lat<span class="op">=</span><span class="va">twomean</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span>, type<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"geometric"</span>,<span class="st">"euclidean"</span><span class="op">)</span><span class="op">)</span>
<span class="va">vismean</span> <span class="op">=</span> <span class="fu">usmap</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/usmap/man/usmap_transform.html" class="external-link">usmap_transform</a></span><span class="op">(</span><span class="va">dfmeans</span><span class="op">)</span>

<span class="co"># visualize</span>
<span class="va">myplot</span> <span class="op">&lt;-</span> <span class="va">myplot</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">vismean</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">lon.1</span>, y<span class="op">=</span><span class="va">lat.1</span>, col<span class="op">=</span><span class="va">type</span><span class="op">)</span>, size<span class="op">=</span><span class="fl">3</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu">ggrepel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/ggrepel/man/geom_text_repel.html" class="external-link">geom_label_repel</a></span><span class="op">(</span>data<span class="op">=</span><span class="va">mycities</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">lon.1</span>, y<span class="op">=</span><span class="va">lat.1</span>, label<span class="op">=</span><span class="va">tt</span><span class="op">)</span>,
                                         size <span class="op">=</span> <span class="fl">2</span>, alpha <span class="op">=</span> <span class="fl">0.5</span>,
             label.r <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grid/unit.html" class="external-link">unit</a></span><span class="op">(</span><span class="fl">0.25</span>, <span class="st">"lines"</span><span class="op">)</span>, label.size <span class="op">=</span> <span class="fl">0.1</span>,
             segment.color <span class="op">=</span> <span class="st">"red"</span>, segment.size <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title<span class="op">=</span><span class="st">"Populated Cities and Central Locations"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">myplot</span><span class="op">)</span></code></pre></div>
<p><img src="RiemannBasic_files/figure-html/unnamed-chunk-5-1.png" width="672" style="display: block; margin: auto;"></p>
<p>From the plot above, we can observe that <strong>geometric</strong> center is right next to Wichita, KS whereas <strong>euclidean</strong> center of locations is a bit deviated, lying between Wichita and Albuquerque, NM.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Kisung You.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
